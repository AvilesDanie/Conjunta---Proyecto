<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:_02.CLIMOV.ViewModels"
             x:Class="_02.CLIMOV.Views.LoginBanquitoScreen"
             Shell.NavBarIsVisible="False">

    <ContentPage.BindingContext>
        <viewmodels:LoginBanquitoViewModel/>
    </ContentPage.BindingContext>

    <Grid>
        <!-- Fondo con gradiente -->
        <BoxView>
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="{StaticResource AzulPrimarioOscuro}" Offset="0.0" />
                    <GradientStop Color="{StaticResource AzulPrimarioMedio}" Offset="0.5" />
                    <GradientStop Color="{StaticResource AzulClaro}" Offset="1.0" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>

        <!-- Botón volver -->
        <ImageButton Source="arrow_back.png"
                     BackgroundColor="Transparent"
                     WidthRequest="40"
                     HeightRequest="40"
                     Margin="16"
                     VerticalOptions="Start"
                     HorizontalOptions="Start"
                     Clicked="OnBackClicked"/>

        <!-- Contenido -->
        <ScrollView>
            <VerticalStackLayout Padding="32" Spacing="30" VerticalOptions="Center">

                <!-- Logo -->
                <Frame CornerRadius="100"
                       WidthRequest="200"
                       HeightRequest="200"
                       Padding="30"
                       HasShadow="False"
                       BackgroundColor="{StaticResource BlancoPuro}"
                       HorizontalOptions="Center">
                    <Image Source="logo_banquito.png"
                           Aspect="AspectFit"
                           HorizontalOptions="Center"
                           VerticalOptions="Center"/>
                </Frame>

                <!-- Título -->
                <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                    <Label Text="BanQuito"
                           FontSize="36"
                           FontAttributes="Bold"
                           TextColor="{StaticResource TextoBlanco}"
                           HorizontalOptions="Center"/>

                    <Label Text="Sistema Bancario"
                           FontSize="16"
                           TextColor="{StaticResource TextoBlanco}"
                           Opacity="0.8"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>

                <!-- Formulario -->
                <Frame CornerRadius="24"
                       Padding="24,32"
                       HasShadow="True"
                       BackgroundColor="{StaticResource BlancoPuro}">
                    <VerticalStackLayout Spacing="20">

                        <!-- Campo Usuario -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Usuario"
                                   TextColor="{StaticResource TextoPrincipal}"
                                   FontSize="14"
                                   FontAttributes="Bold"/>
                            <Frame CornerRadius="12"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="{StaticResource GrisBordes}">
                                <Entry Text="{Binding Username}"
                                       Placeholder="Ingrese su usuario"
                                       PlaceholderColor="{StaticResource TextoGrisMedio}"
                                       TextColor="{StaticResource TextoPrincipal}"
                                       Margin="12,8"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Campo Contraseña -->
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Contraseña"
                                   TextColor="{StaticResource TextoPrincipal}"
                                   FontSize="14"
                                   FontAttributes="Bold"/>
                            <Frame CornerRadius="12"
                                   Padding="0"
                                   HasShadow="False"
                                   BorderColor="{StaticResource GrisBordes}">
                                <Entry Text="{Binding Password}"
                                       Placeholder="Ingrese su contraseña"
                                       PlaceholderColor="{StaticResource TextoGrisMedio}"
                                       TextColor="{StaticResource TextoPrincipal}"
                                       IsPassword="{Binding PasswordVisible, Converter={StaticResource InvertedBoolConverter}}"
                                       Margin="12,8"/>
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Botón Iniciar Sesión -->
                        <Button Text="Iniciar Sesión"
                                Command="{Binding LoginCommand}"
                                BackgroundColor="{StaticResource AzulPrimario}"
                                TextColor="{StaticResource TextoBlanco}"
                                FontAttributes="Bold"
                                CornerRadius="12"
                                HeightRequest="56"
                                IsEnabled="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                                Margin="0,10,0,0"/>

                        <!-- Loading Indicator -->
                        <ActivityIndicator IsRunning="{Binding IsLoading}"
                                         Color="{StaticResource AzulPrimario}"
                                         WidthRequest="24"
                                         HeightRequest="24"
                                         HorizontalOptions="Center"
                                         IsVisible="{Binding IsLoading}"/>
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
